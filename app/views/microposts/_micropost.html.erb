<tr>
  <td class="micropost">
    <span class="content"><%= wrap(micropost.content) %></span>
    <span class="timestamp">
      Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    </span>
  </td>

  <!-- micropost.user sometimes raises an exception, so use rescue -->
  <%# if current_user?(micropost.user) %>
  <% user = micropost.user rescue User.find(micropost.user_id) %>

  <! -- current_user?(user) sometimes doesn't work, while compare by user_id's does -->
  <%# if current_user?(user) %>
  <%# if current_user.id == micropost.user_id %>
  <% if current_user == micropost.user %>
    <td>
      <%= link_to "delete", micropost, :method => :delete,
                                       :confirm => "Are you sure?",
                                       :title => 'Delete "' << micropost.content << '"'
       %>
    </td>
  <% end %>
</tr>