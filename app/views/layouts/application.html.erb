<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <%= csrf_meta_tag %>
    <%= render 'layouts/stylesheets' %>
    <%= javascript_include_tag :defaults %>
    <%= javascript_tag do -%>
      function micropost_textcounter(maxlen) {
        oFormObject = document.forms['microposts']
        oTextarea = oFormObject.elements["micropost[content]"]
        oCounter  = oFormObject.elements["counter"]      
        oCounter.value = (maxlen - oTextarea.value.length)
      }       
    <% end -%>
  </head>
  <body onLoad="micropost_textcounter(140)">
    <div class="container">
      <%= render 'layouts/header' %>
      <section class="round">
        <% flash.each do |key, value| %>      
          <!-- Code replaced with content_tag helper (see exercise 8.6.3)
            <div class="flash <%= key %>"><%= value %></div>
          -->
          <%= content_tag(:div, value, :class => "flash #{key}") %>
        <% end %>  
        <%= yield %>
      </section>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>  
  </body>
</html>
